{"ast":null,"code":"var _jsxFileName = \"/Users/qianziyu/Documents/GitHub/IT-project/front/src/pages/contact.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport axios from '../commons/axios.js';\nimport ContactPendingBrief from '../components/contactPendingBrief.js';\nimport ContactBrief from '../components/contactAcceptBrief.js';\nimport { Menu, Badge, Typography } from 'antd';\nimport { UserOutlined, UserAddOutlined } from '@ant-design/icons';\nimport { Layout, Dropdown } from 'antd';\nimport { Row, Col, Space, Spin } from 'antd';\nimport Cookies from 'universal-cookie';\nimport { Avatar } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Contact(props) {\n  _s();\n\n  const {\n    Text\n  } = Typography;\n  const {\n    SubMenu\n  } = Menu;\n  const [acceptContact, setAcceptContacts] = useState([]);\n  const [pendingContact, setPendingContact] = useState([]);\n  const [length, setLength] = useState('');\n  const {\n    Header,\n    Content,\n    Sider\n  } = Layout;\n  const [detailLoading, setDetailLoading] = useState(true);\n  const [profileLoading, setProfileLoading] = useState(true);\n  const [Detail, setDetail] = useState([]);\n  const id = props.match.params._id;\n  const home = \"/dashboard/\" + id;\n  const [profile, setProfile] = useState([]);\n  useEffect(() => {\n    const id = props.match.params._id;\n    const home = \"/dashboard/\" + id; // connect contact back-end and seting contact list information\n\n    axios.get(home + '/contact').then(response => {\n      if (response.data.success) {\n        setAcceptContacts(response.data.accepted);\n        setPendingContact(response.data.pending);\n        setLength(response.data.pending.length);\n        setDetailLoading(false);\n      }\n    }).catch(error => {});\n    axios.get(home).then(response => {\n      if (response.data.success) {\n        setProfile(response.data.user);\n        setProfileLoading(false);\n      }\n    }).catch(error => {});\n  }, []); // logout function\n\n  const OnLogOut = () => {\n    const logout = '/' + id + '/logout';\n    axios.get(logout).then(response => {\n      if (response.data.success) {\n        const cookies = new Cookies();\n        cookies.remove('token');\n        cookies.remove('connect.sid');\n        props.history.push('/signin');\n      }\n    }).catch(error => {\n      console.log(error.response);\n    });\n  }; //render logout\n\n\n  const logout = /*#__PURE__*/_jsxDEV(Menu, {\n    children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: OnLogOut,\n      children: \"Log Out\"\n    }, \"1\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this); // separate each contact list with index\n\n\n  const renderContact = acceptContact.map((contact, index) => {\n    if (Detail.id === undefined) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \" \"\n      }, void 0, false);\n    }\n\n    if (contact.friend._id === Detail.id) {\n      console.log(Detail.id);\n      return /*#__PURE__*/_jsxDEV(ContactBrief, {\n        contact: contact\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \" \"\n    }, void 0, false);\n  }); // loading page if waiting \n\n  if (detailLoading || profileLoading) {\n    return /*#__PURE__*/_jsxDEV(Space, {\n      size: \"middle\",\n      style: {\n        position: 'relative',\n        marginLeft: '50vw',\n        marginTop: '50vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Spin, {\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 16\n    }, this);\n  } else {\n    // render contact page\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        style: {\n          padding: '0 10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          style: {\n            height: \"64px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 2,\n            offset: 1,\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: home,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/../pics/logo_bee.png\",\n                  alt: \"logo_bee\",\n                  style: {\n                    height: '64px',\n                    padding: '6px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 7,\n            offset: 2,\n            children: /*#__PURE__*/_jsxDEV(Menu, {\n              theme: \"dark\",\n              mode: \"horizontal\",\n              defaultSelectedKeys: ['2'],\n              style: {\n                height: '64px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: home,\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/../pics/user_icon.png\",\n                    alt: \"profile_icon\",\n                    style: {\n                      height: '24px',\n                      verticalAlign: 'middle'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      verticalAlign: 'middle',\n                      paddingLeft: '10px'\n                    },\n                    children: \"Profile\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 37\n                }, this)\n              }, \"1\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: home + '/contact',\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/../pics/contact_icon.png\",\n                    alt: \"contact_icon\",\n                    style: {\n                      height: '24px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      verticalAlign: 'middle',\n                      paddingLeft: '10px'\n                    },\n                    children: \"Contact\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 37\n                }, this)\n              }, \"2\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: home + '/search',\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/../pics/AddFriend.png\",\n                    alt: \"AddFriend\",\n                    style: {\n                      height: '19px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      verticalAlign: 'middle',\n                      paddingLeft: '10px'\n                    },\n                    children: \"Search\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 133,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 37\n                }, this)\n              }, \"3\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 7,\n            offset: 1,\n            children: /*#__PURE__*/_jsxDEV(Menu, {\n              theme: \"dark\",\n              mode: \"horizontal\",\n              style: {\n                height: '64px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Dropdown, {\n                overlay: logout,\n                children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n                  children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                    src: profile.photo.data\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      color: 'white',\n                      verticalAlign: 'middle',\n                      paddingLeft: '10px'\n                    },\n                    children: profile.email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 41\n                  }, this)]\n                }, \"1\", true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Layout, {\n        style: {\n          padding: '2vh 2vh',\n          paddingRight: '2vh',\n          backgroundImage: 'url(\"/../pics/background1.jpg\")'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Sider, {\n          width: '20vw',\n          style: {\n            background: '#fff'\n          },\n          children: /*#__PURE__*/_jsxDEV(Menu, {\n            mode: \"inline\",\n            style: {\n              minHeight: '100vh'\n            },\n            children: [/*#__PURE__*/_jsxDEV(SubMenu, {\n              icon: /*#__PURE__*/_jsxDEV(Badge, {\n                count: length,\n                size: \"small\",\n                offset: [2, -1],\n                children: /*#__PURE__*/_jsxDEV(UserAddOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 59\n              }, this),\n              title: \"New friend\",\n              children: pendingContact.map((contact, index) => /*#__PURE__*/_jsxDEV(Menu.Item, {\n                icon: /*#__PURE__*/_jsxDEV(Avatar, {\n                  icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 55\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 41\n                }, this),\n                style: {\n                  paddingLeft: '20px',\n                  height: '100px'\n                },\n                children: /*#__PURE__*/_jsxDEV(ContactPendingBrief, {\n                  contact: contact\n                }, contact._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 41\n                }, this)\n              }, contact._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 77\n              }, this))\n            }, \"sub1\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(SubMenu, {\n              icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 59\n              }, this),\n              title: \"My friend\",\n              children: acceptContact.map((contact, index) => /*#__PURE__*/_jsxDEV(Menu.Item, {\n                icon: /*#__PURE__*/_jsxDEV(Avatar, {\n                  icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 55\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 41\n                }, this),\n                style: {\n                  paddingLeft: '20px'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: e => setDetail(e.target),\n                  id: contact.friend._id,\n                  children: [contact.friend.givenName, /*#__PURE__*/_jsxDEV(Text, {\n                    type: \"secondary\",\n                    style: {\n                      margin: '5px'\n                    },\n                    children: contact.remark\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 41\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 76\n              }, this))\n            }, \"sub2\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Content, {\n          style: {\n            minHeight: 280,\n            backgroundColor: 'rgba(255, 255, 255, 0.5)',\n            padding: '2vw 2vw'\n          },\n          children: renderContact\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(Contact, \"R5/LmWeJM4sadOw2JbeQGTCU8Cw=\");\n\n_c = Contact;\n\nvar _c;\n\n$RefreshReg$(_c, \"Contact\");","map":{"version":3,"sources":["/Users/qianziyu/Documents/GitHub/IT-project/front/src/pages/contact.js"],"names":["React","useState","useEffect","axios","ContactPendingBrief","ContactBrief","Menu","Badge","Typography","UserOutlined","UserAddOutlined","Layout","Dropdown","Row","Col","Space","Spin","Cookies","Avatar","Contact","props","Text","SubMenu","acceptContact","setAcceptContacts","pendingContact","setPendingContact","length","setLength","Header","Content","Sider","detailLoading","setDetailLoading","profileLoading","setProfileLoading","Detail","setDetail","id","match","params","_id","home","profile","setProfile","get","then","response","data","success","accepted","pending","catch","error","user","OnLogOut","logout","cookies","remove","history","push","console","log","renderContact","map","contact","index","undefined","friend","position","marginLeft","marginTop","padding","height","verticalAlign","paddingLeft","photo","color","email","paddingRight","backgroundImage","background","minHeight","e","target","givenName","margin","remark","backgroundColor"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {useState,useEffect} from 'react'\nimport axios from '../commons/axios.js'\nimport ContactPendingBrief from '../components/contactPendingBrief.js'\nimport ContactBrief from '../components/contactAcceptBrief.js'\nimport { Menu,Badge,Typography } from 'antd';\nimport { UserOutlined,UserAddOutlined} from '@ant-design/icons';\nimport { Layout, Dropdown } from 'antd';\nimport { Row, Col, Space, Spin } from 'antd';\nimport Cookies from 'universal-cookie';\nimport { Avatar } from 'antd';\n\n\n\nexport default function Contact(props){\n    const { Text } = Typography;\n    const { SubMenu } = Menu;\n    const [ acceptContact, setAcceptContacts] = useState([]);\n    const [ pendingContact, setPendingContact] = useState([]);\n    const [ length,setLength ]= useState('');\n    const { Header, Content, Sider } = Layout;\n    const [ detailLoading, setDetailLoading ] = useState(true);\n    const [ profileLoading, setProfileLoading ] = useState(true);\n    const [ Detail, setDetail] = useState([]);\n    const id = props.match.params._id;\n    const home = \"/dashboard/\" + id;\n    const [ profile,setProfile ]= useState([]);\n    \n\n    useEffect(()=>{\n        const id = props.match.params._id;\n        const home = \"/dashboard/\" + id;\n        // connect contact back-end and seting contact list information\n        axios.get(home +'/contact').then(response=>{\n            if(response.data.success){\n                setAcceptContacts(response.data.accepted)\n                setPendingContact(response.data.pending)\n                setLength(response.data.pending.length)\n                setDetailLoading(false)\n            }\n        }).catch(error=>{\n        })\n        \n        axios.get(home).then(response=>{\n            if(response.data.success){\n                setProfile(response.data.user);\n                setProfileLoading(false);\n            }\n        }).catch(error=>{\n        })\n        \n    },[])\n\n    // logout function\n    const OnLogOut = () => { \n        const logout = '/' + id + '/logout';\n        axios.get(logout).then(response => {\n            if (response.data.success) {\n                const cookies = new Cookies();\n                cookies.remove('token');\n                cookies.remove('connect.sid')\n                props.history.push('/signin');\n            }\n        }).catch(error => {\n            console.log(error.response);\n        })\n\n    }\n\n    //render logout\n    const logout = (\n        <Menu>\n            <Menu.Item key=\"1\" onClick = {OnLogOut}>Log Out</Menu.Item>\n        </Menu>\n    );\n\n    // separate each contact list with index\n    const renderContact = acceptContact.map((contact,index)=>{\n        if (Detail.id === undefined){\n            return (<> </>)\n        }\n\n        if (contact.friend._id === Detail.id){\n            console.log(Detail.id)\n            return (\n                <ContactBrief\n                    key ={index}\n                    contact = {contact}/> \n            )\n            \n        }\n        return (<> </>)\n    })\n    // loading page if waiting \n    if (detailLoading || profileLoading) {\n        return <Space size=\"middle\" style={{ position: 'relative', marginLeft: '50vw', marginTop: '50vh' }}>\n            <Spin size=\"large\" />\n            <h3>Loading</h3>\n        </Space>;\n    } \n    else {\n        // render contact page\n        return(\n            <Layout>\n                <Header style={{ padding: '0 10px' }}>\n                    <Row style={{ height: \"64px\" }}>\n                        <Col span={2} offset={1}>\n                            <a href={home}>\n                                <div>\n                                    <img src='/../pics/logo_bee.png' alt='logo_bee' style={{ height: '64px', padding: '6px' }} />\n                                </div>\n                            </a>\n                        </Col>\n                        <Col span={7} offset={2}>\n                            <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']} style={{ height: '64px' }}>\n                                <Menu.Item key=\"1\">\n                                    <a href={home}>\n                                        <img src='/../pics/user_icon.png' alt='profile_icon' style={{ height: '24px', verticalAlign: 'middle' }} />\n                                        <span style={{ verticalAlign: 'middle', paddingLeft: '10px' }}>Profile</span>\n                                    </a>\n                                </Menu.Item>\n                                \n                                <Menu.Item key=\"2\">\n                                    <a href={home+'/contact'}>\n                                        <img src='/../pics/contact_icon.png' alt='contact_icon' style={{ height: '24px' }} />\n                                        <span style={{ verticalAlign: 'middle', paddingLeft: '10px' }}>Contact</span>\n                                    </a>\n                                </Menu.Item>\n\n                                <Menu.Item key=\"3\">\n                                    <a href={home + '/search'}>\n                                        <img src='/../pics/AddFriend.png' alt='AddFriend' style={{ height: '19px' }} />\n                                        <span style={{ verticalAlign: 'middle', paddingLeft: '10px' }}>Search</span>\n                                    </a>\n                                </Menu.Item>\n\n                            </Menu>\n                        </Col>\n                        \n                        <Col span={7} offset={1}>\n                            <Menu theme=\"dark\" mode=\"horizontal\" style={{ height: '64px' }}>\n                                <Dropdown overlay={logout}>\n                                    <Menu.Item key=\"1\">\n                                        <Avatar src={profile.photo.data} />\n                                        <span style={{ color: 'white', verticalAlign: 'middle', paddingLeft: '10px'}}>\n                                            {profile.email}\n                                        </span>\n                                    </Menu.Item>\n                                </Dropdown>\n                            </Menu>\n                        </Col>\n                    </Row>\n                </Header>\n                <Layout  style={{ padding: '2vh 2vh', paddingRight:'2vh', backgroundImage:'url(\"/../pics/background1.jpg\")'}}>\n                    <Sider width={'20vw'} style = {{background: '#fff'}}>\n                        <Menu \n                            mode=\"inline\"\n                            style={{minHeight: '100vh'}}\n                        >   \n                                <SubMenu key=\"sub1\" icon={<Badge count={length} size=\"small\" offset={[2,-1]}> \n                                                        <UserAddOutlined/> \n                                                        </Badge>} title=\"New friend\" >\n                                    {pendingContact.map((contact, index) => <Menu.Item key = {contact._id} icon = {\n                                        <Avatar icon={<UserOutlined />} />}  style = {{paddingLeft: '20px', height:'100px'}}  > \n                                        <ContactPendingBrief\n                                        key ={contact._id}\n                                        contact = {contact}/>\n                                    </Menu.Item>)}\n                                    \n                                </SubMenu>\n                                <SubMenu key=\"sub2\" icon={<UserOutlined/>} title=\"My friend\">\n                                    {acceptContact.map((contact, index) => <Menu.Item key = {index} icon = {\n                                        <Avatar icon={<UserOutlined />}/>\n                                    } style = {{paddingLeft: '20px'}}> \n                                        <div \n                                        onClick={e => setDetail(e.target)} \n                                        id = {contact.friend._id}\n                                        >\n                                            {contact.friend.givenName}\n                                        <Text \n                                        type=\"secondary\"\n                                        style={{margin:'5px'}}\n                                        >\n                                            {contact.remark}\n                                        </Text>\n                                            \n                                        </div>\n                                    </Menu.Item>)}\n                                </SubMenu>    \n                        </Menu>\n                    </Sider>\n                    <Content style={{minHeight: 280, backgroundColor: 'rgba(255, 255, 255, 0.5)', padding: '2vw 2vw'}}> \n                        {renderContact}\n                    </Content>\n                </Layout>\n            </Layout>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}